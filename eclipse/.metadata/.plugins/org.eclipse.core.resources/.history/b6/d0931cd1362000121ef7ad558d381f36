package net.minecraft.src;

import java.io.File;
import java.io.FileNotFoundException;
import java.io.FileReader;
import java.io.IOException;
import java.security.MessageDigest;
import java.security.NoSuchAlgorithmException;
import java.text.DateFormat;
import java.text.SimpleDateFormat;
import java.util.Random;
import java.util.Scanner;

public class GCUtil {

	public static final DateFormat fileDateFormat = new SimpleDateFormat("yyyy-MM-dd_HH-mm-ss");
	private static final SimpleDateFormat dateFormatter = new SimpleDateFormat("yyyy-MM-dd HH:mm:ss");
	
	private static byte[] createChecksum(String string) throws NoSuchAlgorithmException {
		MessageDigest complete = MessageDigest.getInstance("MD5");
		byte[] buffer = string.getBytes();
		complete.update(buffer, 0, buffer.length);
		return complete.digest();
	}

	public static String getMD5Checksum(String string) throws NoSuchAlgorithmException {
		byte[] b = createChecksum(string);
		StringBuilder result = new StringBuilder(32);
		for (int i=0; i < b.length; i++) {
			result.append(Integer.toString( ( b[i] & 0xff ) + 0x100, 16).substring( 1 ));
		}
		return result.toString();
	}
	
	public static String readFile(File f) throws IOException {
		Scanner fr = new Scanner(f);
		StringBuilder sb = new StringBuilder(64);
		while(fr.hasNextLine()) {
			if(sb.length() > 0)
				sb.append('\n');
			sb.append(fr.nextLine());
		}
		fr.close();
		return sb.toString();
	}
	
	public static String randomString(int length) {
		return randomString(length, new Random());
	}
	
	private static final char[] chars = "abcdefghijklmnopqrstuvwxyz0123456789".toCharArray();
	
	public static String randomString(int length, Random rand) {
		StringBuilder sb = new StringBuilder(length);
		for(int i = 0; i < length; ++i)
			sb.append(chars[rand.nextInt(chars.length)]);
		return sb.toString();
	}
	
	public final static int getUnitDiff(double loc1, double loc2) {
		return MathHelper.floor_double(loc1 * 32.0D) - MathHelper.floor_double(loc2 * 32.0D);
	}
}
