// Decompiled by Jad v1.5.8g. Copyright 2001 Pavel Kouznetsov.
// Jad home page: http://www.kpdus.com/jad.html
// Decompiler options: packimports(3) braces deadcode fieldsfirst 

package net.minecraft.src;

import java.sql.Date;
import java.util.List;
import net.minecraft.client.Minecraft;
import org.lwjgl.opengl.GL11;

// Referenced classes of package net.minecraft.src:
//            GuiSlot, GuiMultiplayer, GuiButton, ServerNBTStorage, 
//            ThreadPollServers, FontRenderer, RenderEngine, Tessellator

class GuiSlotReplay extends GuiSlot {

	private final GuiReplays parent;

	public GuiSlotReplay(GuiReplays parent) {
		super(parent.mc, parent.width, parent.height, 32, parent.height - 64, 36);
		this.parent = parent;
	}

	@Override
	protected int getSize() {
		return parent.replaysList.size();
	}

	@Override
	protected void elementClicked(int i, boolean flag) {
		parent.selectedReplay = i;
		boolean flag1 = parent.selectedReplay >= 0 && parent.selectedReplay < getSize();
		parent.buttonSelect.enabled = flag1;
		if(flag && flag1) {
			parent.playSelectedReplay();
		}
	}

	@Override
	protected boolean isSelected(int i) {
		return i == parent.selectedReplay;
	}

	@Override
	protected int getContentHeight() {
		return getSize() * 36;
	}

	@Override
	protected void drawBackground() {
		parent.drawDefaultBackground();
	}

	@Override
	protected void drawSlot(int i, int j, int k, int l, Tessellator tessellator) {
		GuiReplayElement replay = parent.replaysList.get(i);
		parent.drawString(parent.fontRenderer, replay.replayTag.getString("Name"), j + 2, k + 1, 0xffffff);
		parent.drawString(parent.fontRenderer, GCUtil.dateFormat.format(new Date(replay.replayTag.getLong("Started"))), j + 2, k + 12, 0x808080);
		int version = replay.replayTag.getInteger("Version");
		if(version < NetClientHandlerReplay.MIN_ALLOWED_VERSION)
			parent.drawString(parent.fontRenderer, "Требуется конвертация", j + 2, k + 12 + 11, 0x303030);
		else if(version > NetClientHandlerReplay.MAX_ALLOWED_VERSION)
			parent.drawString(parent.fontRenderer, "Версия не поддерживается", j + 2, k + 12 + 11, 0x303030);
		else {
			int length;
			if(replay.replayTag.getByte("Type") == 1)
				length = replay.replayTag.getInteger("Cycles") * 50;
			else
				length = replay.replayTag.getInteger("Length");
			length /= 1000;
			
			parent.drawString(parent.fontRenderer, "Миу", j + 2, k + 12 + 11, 0x303030);
		}
	}
}
